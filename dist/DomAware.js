class DomAware{DELAY=1e3/60;start=0;intervalId=null;constructor(t,i){this.condition=t,this.task=i}stopDelayRun(){this.intervalId||clearTimeout(this.intervalId)}delayRun(){this.intervalId=setTimeout(()=>{this.run()},this.DELAY)}run(){this.stopDelayRun(),this.condition()?this.actualRun():this.delayRun()}actualRun(){this.task()}}class DomAwareBuilder{conditions=[];task=null;docCondition=()=>"undefined"!=typeof document;docTask=()=>{const t=new DomAware(condition,task);t.run()};onDocumentReady(){return this.on(this.docCondition)}on(t){return Array.isArray(t)?this.conditions=[...this.conditions,...t]:this.conditions.push(t),this}then(t){return this.task=t,this}run(){if(0==this.conditions.length)this.task();else{var t=this.conditions.shift();const i=new DomAware(t,()=>{const t=new DomAwareBuilder;t.on(this.conditions).then(this.task),t.run()});i.run()}}}module.exports={DomAware:DomAware,DomAwareBuilder:DomAwareBuilder};